/* ==========================================================================
   Global Utility Classes
   Using @layer utilities to bundle with Tailwind's utility classes
   ========================================================================== */

/**
 * Global Utility Classes for CSS Modules
 *
 * This file contains reusable CSS utility classes using Tailwind's @apply directive.
 * These utilities can be used across multiple components to prevent duplication.
 *
 * NAMING CONVENTIONS:
 * - Use kebab-case for class names (e.g., .space-y-4, .text-sm)
 * - Be descriptive but concise
 * - Group related utilities together with comments
 *
 * WHEN TO ADD HERE:
 * - Pattern is used in 3+ components
 * - Pattern is a common layout/spacing utility
 * - Pattern represents a reusable design token
 *
 * WHEN TO USE COMPONENT-SPECIFIC STYLES:
 * - Styling is unique to one component
 * - Styling has specific business logic or context
 */

@layer utilities {
  /* ==========================================================================
     Layout & Spacing
     ========================================================================== */

  .util-space-y-1 {
    @apply space-y-1;
  }

  .util-space-y-2 {
    @apply space-y-2;
  }

  .util-space-y-4 {
    @apply space-y-4;
  }

  .util-space-y-6 {
    @apply space-y-6;
  }

  .util-grid-2-col {
    @apply grid grid-cols-1 md:grid-cols-2 gap-4;
  }

  .util-flex-end {
    @apply flex justify-end;
  }

  .util-flex-between {
    @apply flex justify-between items-center;
  }

  .util-flex-center {
    @apply flex items-center justify-center;
  }

  /* ==========================================================================
     Typography
     ========================================================================== */

  .util-text-xs {
    @apply text-xs;
    color: var(--muted-foreground);
  }

  .util-text-sm {
    @apply text-sm;
    color: var(--muted-foreground);
  }

  .util-text-base {
    @apply text-base;
    color: var(--foreground);
  }

  .util-heading {
    @apply text-xl font-semibold mb-4;
  }

  .util-heading-lg {
    @apply text-2xl font-bold;
  }

  /* ==========================================================================
     Common UI Patterns
     ========================================================================== */

  .util-card-content {
    @apply p-6;
  }

  .util-card-header {
    @apply p-6 pb-4;
  }

  .util-rounded-md {
    @apply rounded-md;
  }

  .util-rounded-lg {
    @apply rounded-lg;
  }

  /* ==========================================================================
     Form Elements
     ========================================================================== */

  .util-input-base {
    @apply flex h-10 w-full rounded-md border px-3 py-2 text-sm;
    border-color: var(--input);
    background-color: var(--background);
    --tw-ring-offset-color: var(--background);
  }

  .util-input-base:focus-visible {
    @apply outline-none ring-2 ring-offset-2;
    --tw-ring-color: var(--ring);
  }

  .util-label {
    @apply text-sm font-medium leading-none;
  }

  .util-field-error {
    @apply text-sm text-red-600 dark:text-red-400 mt-1 font-medium;
  }

  /* ==========================================================================
     Interactive States
     Reusable hover, focus, and press utilities for cards, rows, and buttons
     ========================================================================== */

  /**
   * Card Interactive
   * Apply to cards that should lift on hover
   * Uses GPU-accelerated transforms for smooth animation
   */
  .card-interactive {
    transition:
      transform var(--duration-fast) var(--ease-out-soft),
      box-shadow var(--duration-fast) var(--ease-out-soft);
    cursor: pointer;
  }

  .card-interactive:hover {
    transform: translateY(-2px);
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 0.1),
      0 2px 4px -2px rgb(0 0 0 / 0.1);
  }

  .card-interactive:active {
    transform: translateY(0);
  }

  /* Dark mode shadow adjustments */
  :root[class~="dark"] .card-interactive:hover,
  .dark .card-interactive:hover {
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 0.3),
      0 2px 4px -2px rgb(0 0 0 / 0.2);
  }

  /**
   * Row Hover
   * Apply to list rows and table rows for subtle highlight on hover
   */
  .row-hover {
    transition: background-color var(--duration-fast) var(--ease-out-soft);
  }

  .row-hover:hover {
    background-color: color-mix(in srgb, var(--accent) 5%, transparent);
  }

  /**
   * Button Pressed
   * Apply to buttons for tactile press feedback
   */
  .btn-pressed {
    transition: transform var(--duration-fast) var(--ease-out-soft);
  }

  .btn-pressed:active {
    transform: scale(0.98);
  }

  /**
   * Focus Ring
   * Consistent focus ring for keyboard navigation accessibility
   * Meets WCAG 2.1 AA requirements for focus indicators
   */
  .focus-ring {
    outline: none;
  }

  .focus-ring:focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
    border-radius: inherit;
  }

  /**
   * Focusable Card
   * For cards that are clickable and should be keyboard accessible
   * Combines interactive hover with focus visibility
   */
  .focusable-card {
    transition:
      transform var(--duration-fast) var(--ease-out-soft),
      box-shadow var(--duration-fast) var(--ease-out-soft),
      outline-color var(--duration-fast) var(--ease-out-soft);
    cursor: pointer;
    outline: 2px solid transparent;
    outline-offset: 2px;
  }

  .focusable-card:hover {
    transform: translateY(-2px);
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 0.1),
      0 2px 4px -2px rgb(0 0 0 / 0.1);
  }

  .focusable-card:focus-visible {
    outline-color: var(--ring);
    transform: translateY(-2px);
  }

  .focusable-card:active {
    transform: translateY(0);
  }

  /* Dark mode shadow adjustments */
  :root[class~="dark"] .focusable-card:hover,
  .dark .focusable-card:hover {
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 0.3),
      0 2px 4px -2px rgb(0 0 0 / 0.2);
  }

  /**
   * Icon Container Hover
   * For icon containers that should emphasize on hover
   */
  .icon-container-hover {
    transition:
      background-color var(--duration-fast) var(--ease-out-soft),
      color var(--duration-fast) var(--ease-out-soft);
  }

  .icon-container-hover:hover {
    background-color: color-mix(in srgb, var(--accent) 20%, transparent);
  }

  /* ==========================================================================
     Clickable Utility
     Generic cursor-pointer for interactive elements
     ========================================================================== */

  /**
   * Clickable
   * Apply to any element that is clickable but not a button
   */
  .clickable {
    cursor: pointer;
  }

  /* ==========================================================================
     Icon Sizes
     ========================================================================== */

  .icon-xs {
    @apply w-3 h-3;
  }

  .icon-sm {
    @apply w-4 h-4;
  }

  .icon-md {
    @apply w-5 h-5;
  }

  .icon-lg {
    @apply w-6 h-6;
  }

  .icon-xl {
    @apply w-8 h-8;
  }

  /* ==========================================================================
     Reduced Motion Support
     ========================================================================== */

  @media (prefers-reduced-motion: reduce) {
    .card-interactive,
    .row-hover,
    .btn-pressed,
    .icon-container-hover {
      transition: none;
    }

    .card-interactive:hover {
      transform: none;
    }

    .btn-pressed:active {
      transform: none;
    }
  }
}
