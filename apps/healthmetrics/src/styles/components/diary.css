/* ==========================================================================
   Diary Component Styles
   Using @layer components to bundle with main CSS (prevents FOUC)
   ========================================================================== */

@layer components {
  /* ==========================================================================
     Diary Page Layout
     ========================================================================== */

  .diary-page-layout {
    @apply flex flex-col gap-6;
  }

  .diary-page-header {
    @apply flex items-center justify-between flex-wrap gap-4;
  }

  .diary-page-title {
    @apply text-2xl font-bold;
  }

  .diary-page-subtitle {
    @apply text-sm;
    color: var(--muted-foreground);
  }
  /**
   * DiaryDayView Component Styles
   *
   * Day view with date selector, totals, and entries
   */

  /* ==========================================================================
     Container
     ========================================================================== */

  .diary-day-container {
    @apply space-y-6;
  }

  /* ==========================================================================
     Hero Card uses shared NutritionSummary component
     CSS is in src/styles/components/ui.css (.nutrition-*)
     ========================================================================== */

  /* ==========================================================================
     Legacy Date Selector Card (keeping for backwards compatibility)
     ========================================================================== */

  .diary-day-date-card {
    @apply p-4;
  }

  .diary-day-date-content {
    @apply flex items-center justify-between gap-4;
  }

  .diary-day-date-display {
    @apply flex items-center gap-2;
  }

  .diary-day-date-icon {
    @apply w-5 h-5;
    color: var(--muted-foreground);
  }

  .diary-day-date-text {
    @apply text-sm font-medium;
  }

  .diary-day-date-input {
    @apply w-auto;
  }

  /* ==========================================================================
     Legacy Totals Card (keeping for backwards compatibility)
     ========================================================================== */

  .diary-day-totals-card {
    @apply p-6;
  }

  .diary-day-totals-title {
    @apply text-xl font-semibold mb-4;
  }

  .diary-day-totals-grid {
    @apply grid grid-cols-2 md:grid-cols-4 gap-4;
  }

  .diary-day-total-item {
    /* No additional styles needed */
  }

  .diary-day-total-label {
    @apply text-sm;
    color: var(--muted-foreground);
  }

  .diary-day-total-value {
    @apply text-2xl font-bold;
  }

  .diary-day-total-unit {
    @apply text-xs;
    color: var(--muted-foreground);
  }

  .diary-day-entry-count {
    @apply text-xs mt-4;
    color: var(--muted-foreground);
  }

  /* ==========================================================================
     Loading State
     ========================================================================== */

  .diary-day-loading-item {
    @apply animate-pulse;
  }

  .diary-day-loading-label {
    @apply h-4 rounded w-20 mb-2;
    background-color: var(--muted);
  }

  .diary-day-loading-value {
    @apply h-8 rounded w-16;
    background-color: var(--muted);
  }

  /* ==========================================================================
     Meals Section
     ========================================================================== */

  .diary-entry-count {
    @apply text-sm text-center mt-2;
    color: var(--muted-foreground);
  }

  .diary-day-meals-header {
    @apply flex justify-between items-center flex-wrap gap-3;
  }

  .diary-day-meals-title {
    @apply text-xl font-semibold;
  }

  .diary-day-actions {
    @apply flex items-center gap-2;
  }

  .diary-day-add-icon {
    @apply w-4 h-4 mr-2;
  }

  /**
   * DiaryEntryList Component Styles
   *
   * List of diary entries grouped by meal type
   */

  /* ==========================================================================
     Container
     ========================================================================== */

  .diary-entry-list-container {
    @apply space-y-4;
  }

  /* ==========================================================================
     Loading State
     ========================================================================== */

  .diary-entry-loading-card {
    @apply p-4 animate-pulse;
  }

  .diary-entry-loading-title {
    @apply h-6 rounded w-32 mb-3;
    background-color: var(--muted);
  }

  .diary-entry-loading-list {
    @apply space-y-2;
  }

  .diary-entry-loading-item {
    @apply h-4 rounded;
    background-color: var(--muted);
  }

  .diary-entry-loading-item-short {
    @apply w-3/4;
  }

  /* ==========================================================================
     Empty State
     ========================================================================== */

  .diary-entry-empty-card {
    @apply p-12 text-center;
  }

  .diary-entry-empty-icon {
    @apply w-12 h-12 mx-auto mb-4 opacity-50;
    color: var(--muted-foreground);
  }

  .diary-entry-empty-title {
    @apply text-lg font-medium mb-2;
  }

  .diary-entry-empty-description {
    @apply text-sm;
    color: var(--muted-foreground);
  }

  /* ==========================================================================
     Meal Card
     ========================================================================== */

  .diary-entry-meal-card {
    @apply p-4;
  }

  .diary-entry-meal-header {
    @apply flex items-center justify-between mb-3 pb-3 border-b;
  }

  .diary-entry-meal-header-left {
    @apply flex items-center gap-2;
  }

  .diary-entry-meal-icon {
    @apply w-5 h-5;
    color: var(--primary);
  }

  .diary-entry-meal-label {
    @apply font-semibold;
  }

  .diary-entry-meal-calories {
    @apply text-sm font-medium;
  }

  .diary-entry-meal-calories-value {
    @apply text-base font-bold;
    color: var(--foreground);
  }

  /* ==========================================================================
     Entry List
     ========================================================================== */

  .diary-entry-list {
    @apply space-y-3;
  }

  .diary-entry {
    @apply flex items-start justify-between gap-4 py-2 px-2 -mx-2 rounded-md;
    transition: background-color var(--duration-fast) var(--ease-out-soft);
  }

  .diary-entry-content {
    @apply flex-1 min-w-0;
  }

  .diary-entry-name {
    @apply font-medium truncate;
  }

  .diary-entry-brand {
    @apply text-xs;
    color: var(--muted-foreground);
  }

  .diary-entry-quantity {
    @apply text-sm;
    color: var(--muted-foreground);
  }

  .diary-entry-notes {
    @apply text-xs italic mt-1;
    color: var(--muted-foreground);
  }

  .diary-entry-nutrition {
    @apply text-right shrink-0;
  }

  .diary-entry-calories {
    @apply font-semibold;
  }

  .diary-entry-unit {
    @apply text-xs;
    color: var(--muted-foreground);
  }

  .diary-entry-macros {
    @apply text-xs mt-1 space-y-0.5;
    color: var(--muted-foreground);
  }

  /* ==========================================================================
     Meal Totals
     ========================================================================== */

  .diary-entry-meal-totals {
    @apply mt-3 pt-3 border-t;
  }

  .diary-entry-totals-row {
    @apply flex justify-between text-sm font-medium;
  }

  .diary-entry-totals-label {
    /* No additional styles needed */
  }

  .diary-entry-totals-values {
    @apply text-right;
  }

  .diary-entry-totals-macros {
    @apply text-xs;
    color: var(--muted-foreground);
  }

  /**
   * MealCard Component Styles
   *
   * Card displaying a meal with food items
   */

  /* ==========================================================================
     Header
     ========================================================================== */

  .diary-meal-header {
    @apply pb-3;
  }

  .diary-meal-header-content {
    @apply flex items-center justify-between;
  }

  .diary-meal-header-left {
    @apply flex items-center gap-2;
  }

  .diary-meal-icon {
    @apply w-5 h-5;
    color: var(--accent);
  }

  .diary-meal-title {
    @apply text-lg font-semibold;
  }

  .diary-meal-total-calories {
    @apply text-sm font-medium;
  }

  .diary-meal-calories-value {
    @apply text-lg font-bold;
    color: var(--foreground);
  }

  .diary-meal-calories-unit {
    color: var(--muted-foreground);
  }

  /* ==========================================================================
     Content
     ========================================================================== */

  .diary-meal-content {
    @apply space-y-2 px-4 pb-4;
  }

  .diary-meal-food-list {
    @apply space-y-1;
  }

  /* ==========================================================================
     Add Button
     ========================================================================== */

  .diary-meal-add-button {
    @apply w-full justify-start;
    color: var(--muted-foreground);
  }

  .diary-meal-add-button:hover {
    color: var(--accent);
  }

  /* Clickable meal card link (for dashboard) */
  .diary-meal-card-link {
    @apply block no-underline;
    color: inherit;
  }

  .diary-meal-card-clickable {
    @apply cursor-pointer;
  }

  /* ==========================================================================
     Loading State
     ========================================================================== */

  .diary-meal-loading-content {
    @apply space-y-2;
  }

  .diary-meal-loading-food-list {
    @apply space-y-2;
  }

  /**
   * FoodItem Component Styles
   *
   * Individual food item in a meal
   */

  /* ==========================================================================
     Item Container
     ========================================================================== */

  .diary-food-item {
    @apply flex items-center justify-between py-2 rounded-md px-2 -mx-2 transition-colors;
    cursor: pointer;
  }

  .diary-food-item:hover {
    background-color: color-mix(in srgb, var(--accent) 5%, transparent);
  }

  /* ==========================================================================
     Content
     ========================================================================== */

  .diary-food-content {
    @apply flex-1;
  }

  .diary-food-details {
    @apply flex items-baseline gap-2;
  }

  .diary-food-name {
    @apply text-sm;
  }

  .diary-food-quantity {
    @apply text-xs;
    color: var(--muted-foreground);
  }

  /* ==========================================================================
     Calories
     ========================================================================== */

  .diary-food-calories {
    @apply text-sm font-medium;
  }

  .diary-food-calories-unit {
    @apply text-xs;
    color: var(--muted-foreground);
  }

  /**
   * AddFoodDialog Component Styles
   *
   * Dialog for adding food items to diary
   */

  /* ==========================================================================
     Dialog Content
     ========================================================================== */

  .diary-add-dialog-content {
    @apply max-w-2xl max-h-[90vh] overflow-y-auto;
  }

  .diary-add-form {
    @apply space-y-4;
  }

  /* ==========================================================================
     Search Section
     ========================================================================== */

  .diary-add-search-section {
    @apply space-y-2;
  }

  .diary-add-search-wrapper {
    @apply relative;
  }

  .diary-add-search-icon {
    @apply absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4;
    color: var(--muted-foreground);
  }

  /* ==========================================================================
     Search Results
     ========================================================================== */

  .diary-add-results-container {
    @apply border rounded-md max-h-60 overflow-y-auto;
  }

  .diary-add-results-loading {
    @apply flex items-center justify-center p-8;
  }

  .diary-add-loading-spinner {
    @apply w-6 h-6 animate-spin;
    color: var(--muted-foreground);
  }

  .diary-add-results-empty {
    @apply p-8 text-center text-sm;
    color: var(--muted-foreground);
  }

  .diary-add-results-list {
    @apply divide-y;
  }

  .diary-add-result-item {
    @apply w-full p-3 text-left transition-colors;
    cursor: pointer;
  }

  .diary-add-result-item:hover {
    background-color: var(--accent);
  }

  .diary-add-result-name {
    @apply font-medium;
  }

  .diary-add-result-brand {
    @apply text-xs;
    color: var(--muted-foreground);
  }

  .diary-add-result-nutrition {
    @apply text-xs mt-1;
    color: var(--muted-foreground);
  }

  /* ==========================================================================
     Selected Food Card
     ========================================================================== */

  .diary-add-selected-card {
    @apply p-4 rounded-md;
    background-color: var(--accent);
  }

  .diary-add-selected-content {
    @apply flex items-start justify-between;
  }

  .diary-add-selected-info {
    /* No additional styles needed */
  }

  .diary-add-selected-name {
    @apply font-semibold;
  }

  .diary-add-selected-brand {
    @apply text-sm;
    color: var(--muted-foreground);
  }

  .diary-add-selected-per100g {
    @apply text-xs mt-1;
    color: var(--muted-foreground);
  }

  /* ==========================================================================
     Form Fields
     ========================================================================== */

  .diary-add-field-section {
    @apply space-y-2;
  }

  .diary-add-field-grid {
    @apply grid grid-cols-2 gap-4;
  }

  .diary-add-select-input {
    @apply flex h-10 w-full rounded-md border px-3 py-2 text-sm;
    border-color: var(--input);
    background-color: var(--background);
    --tw-ring-offset-color: var(--background);
  }

  .diary-add-select-input:focus-visible {
    @apply outline-none ring-2 ring-offset-2;
    --tw-ring-color: var(--ring);
  }

  /* ==========================================================================
     Calculated Nutrition
     ========================================================================== */

  .diary-add-nutrition-card {
    @apply p-4 rounded-md border;
    background-color: var(--muted);
    border-color: var(--border);
  }

  .diary-add-nutrition-title {
    @apply text-sm font-medium mb-3;
  }

  .diary-add-nutrition-grid {
    @apply grid grid-cols-4 gap-2 text-center;
  }

  .diary-add-nutrition-item {
    /* No additional styles needed */
  }

  .diary-add-nutrition-value {
    @apply text-lg font-bold;
  }

  .diary-add-nutrition-label {
    @apply text-xs;
    color: var(--muted-foreground);
  }

  /* ==========================================================================
     Footer
     ========================================================================== */

  .diary-add-footer {
    @apply flex justify-end gap-2;
  }

  .diary-add-submit-button {
    /* No additional styles needed - uses Button component */
  }

  /* ==========================================================================
     Fasting Warning Banner
     Shows at the top of diary when user has an active fast
     ========================================================================== */

  .diary-fasting-banner {
    @apply flex items-center gap-4 p-4 rounded-xl;
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--warning) 15%, var(--card)) 0%,
      color-mix(in srgb, var(--warning) 5%, var(--card)) 100%
    );
    border: 1px solid color-mix(in srgb, var(--warning) 30%, transparent);
  }

  .diary-fasting-banner-success {
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--success) 15%, var(--card)) 0%,
      color-mix(in srgb, var(--success) 5%, var(--card)) 100%
    );
    border-color: color-mix(in srgb, var(--success) 30%, transparent);
  }

  .diary-fasting-banner-icon {
    @apply flex-shrink-0 flex items-center justify-center w-10 h-10 rounded-full;
    background: color-mix(in srgb, var(--warning) 20%, transparent);
  }

  .diary-fasting-banner-success .diary-fasting-banner-icon {
    background: color-mix(in srgb, var(--success) 20%, transparent);
  }

  .diary-fasting-banner-icon-svg {
    @apply w-5 h-5;
    color: var(--warning);
  }

  .diary-fasting-banner-success .diary-fasting-banner-icon-svg {
    color: var(--success);
  }

  .diary-fasting-banner-content {
    @apply flex-1 min-w-0;
  }

  .diary-fasting-banner-title {
    @apply font-semibold text-sm;
  }

  .diary-fasting-banner-details {
    @apply flex items-center gap-2 text-sm;
    color: var(--muted-foreground);
  }

  .diary-fasting-banner-protocol {
    @apply font-medium;
  }

  .diary-fasting-banner-separator {
    @apply opacity-50;
  }

  .diary-fasting-banner-time {
    /* inherits */
  }

  .diary-fasting-banner-warning {
    @apply text-xs mt-1;
    color: var(--warning);
  }

  .diary-fasting-banner-success .diary-fasting-banner-warning {
    color: var(--success);
  }

  .diary-fasting-banner-action {
    @apply flex-shrink-0;
  }

  .diary-fasting-banner-action-icon {
    @apply w-4 h-4 ml-1;
  }

  /* ==========================================================================
     Fasting Warning Dialog
     Shown when user tries to add food while actively fasting
     ========================================================================== */

  .fasting-warning-dialog {
    @apply max-w-md;
  }

  .fasting-warning-dialog-icon-wrapper {
    @apply flex items-center justify-center w-12 h-12 mx-auto mb-4 rounded-full;
    background: color-mix(in srgb, var(--warning) 15%, transparent);
  }

  .fasting-warning-dialog-icon {
    @apply w-6 h-6;
    color: var(--warning);
  }

  .fasting-warning-dialog-title {
    @apply text-center text-lg font-semibold;
  }

  .fasting-warning-dialog-description {
    @apply text-center;
    color: var(--muted-foreground);
  }

  .fasting-warning-status-card {
    @apply p-4 rounded-lg my-4;
    background: var(--muted);
    border: 1px solid var(--border);
  }

  .fasting-warning-status-header {
    @apply flex items-center gap-2 mb-3;
  }

  .fasting-warning-status-icon {
    @apply w-4 h-4;
    color: var(--accent);
  }

  .fasting-warning-status-protocol {
    @apply font-medium text-sm;
  }

  .fasting-warning-status-progress {
    @apply flex items-center gap-3 mb-3;
  }

  .fasting-warning-progress-bar {
    @apply flex-1 h-2 rounded-full overflow-hidden;
    background: var(--border);
  }

  .fasting-warning-progress-fill {
    @apply h-full rounded-full transition-all;
    background: var(--accent);
  }

  .fasting-warning-progress-text {
    @apply text-xs font-medium whitespace-nowrap;
    color: var(--muted-foreground);
  }

  .fasting-warning-status-times {
    @apply flex justify-between;
  }

  .fasting-warning-time-item {
    @apply flex flex-col;
  }

  .fasting-warning-time-label {
    @apply text-xs;
    color: var(--muted-foreground);
  }

  .fasting-warning-time-value {
    @apply text-sm font-semibold tabular-nums;
  }

  .fasting-warning-dialog-footer {
    @apply flex flex-col gap-2;
  }

  .fasting-warning-btn-end {
    @apply w-full;
  }

  .fasting-warning-btn-icon {
    @apply w-4 h-4 mr-2;
  }

  .fasting-warning-btn-icon-spin {
    @apply w-4 h-4 mr-2 animate-spin;
  }

  .fasting-warning-btn-log {
    @apply w-full;
  }

  .fasting-warning-btn-cancel {
    @apply w-full;
  }
}
